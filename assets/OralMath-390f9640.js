import{d as y,v as I,p as N,A as B,aU as O,e as d,w as t,aW as C,aV as V,o as c,l as s,k as u,t as i,f as p,q as v,a as M,x as S,F as q,aX as D,aZ as F,m as G}from"./index-90b969ab.js";import{a as H,E as A,b as L}from"./el-card-09a506d3.js";/* empty css                 */import{E as R}from"./el-button-a1c979f6.js";import{a as l,_ as T,c as U}from"./CountDown.vue_vue_type_script_setup_true_lang-70478b33.js";import{E as z}from"./index-5b94a77c.js";import"./use-form-item-c74f1215.js";import"./index-4acc60bd.js";import"./scroll-def8f48a.js";import"./validator-f2e4259a.js";import"./index-3f25c50f.js";const P={class:"question"},W=y({__name:"OralMath",setup(X){const e=I({id:0,name:"",state:l.IDLE,meta:[{title:"",answer:0,user_answer:0,mark:""}]}),m=C();N(()=>{e.id=Number(m.query.id),e.name=String(m.query.name),e.state=l.ONGOING,B.getOralMath(e.id).then(a=>{e.meta=[],a.data.forEach(n=>e.meta.push({title:n[0],answer:n[1],user_answer:0,mark:""}))})});const f=()=>{e.meta.forEach(a=>a.mark=a.answer==a.user_answer?"✅":"❌"),e.state=l.FINISHED};return O((a,n,o)=>{if(e.state!=l.ONGOING){o();return}U.confirm("正在考试中，离开页面数据将会丢失，考试中断！","确认离开吗？",{confirmButtonText:"继续考试",cancelButtonText:"确认离开",type:"warning",closeOnPressEscape:!1,distinguishCancelAndClose:!0}).then(r=>{o(!1)}).catch(r=>{r=="cancel"?o():o(!1)})}),(a,n)=>{const o=R,r=D,E=z,b=A,h=L,w=H,x=F,g=V;return c(),d(g,null,{default:t(()=>[s(r,null,{default:t(()=>[u("span",null,"【"+i(e.name)+"】",1),s(T,{style:{color:"red"},start_flag:!0,duration_secs:10,blink:!0,start_text:"【考试剩余】",onEnd_event:n[0]||(n[0]=()=>{})}),s(o,{link:"",type:"primary",disabled:e.state==p(l).FINISHED,onClick:f},{default:t(()=>[v("提交")]),_:1},8,["disabled"])]),_:1}),s(x,null,{default:t(()=>[s(w,{gutter:16,class:"q-body"},{default:t(()=>[(c(!0),M(q,null,S(e.meta,_=>(c(),d(h,{xs:24,sm:12,md:8,lg:6,xl:4},{default:t(()=>[s(b,null,{default:t(()=>[u("span",P,i(_.title),1),s(E,{modelValue:_.user_answer,"onUpdate:modelValue":k=>_.user_answer=k,max:999,clearable:"",type:"number",size:"small",disabled:e.state==p(l).FINISHED},null,8,["modelValue","onUpdate:modelValue","disabled"]),u("span",null,i(_.mark),1)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}});const ne=G(W,[["__scopeId","data-v-0a2b8174"]]);export{ne as default};
